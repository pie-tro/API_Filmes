<div class="page-container">
  <div class="overlay"></div>

  <div class="content-wrapper">
    
    <header class="page-header">
      <h1>Gerenciar <span class="highlight">Filmes</span></h1>
      <a routerLink="/" class="back-link">‚Üê Voltar</a>
    </header>

    <div class="grid-layout">
      
      <section class="glass-card form-section">
        <h2>Novo filme</h2>
        <p class="subtitle">Adicione ao cat√°logo</p>
        
        <form (ngSubmit)="criar()" class="movie-form">
          <div class="input-group">
            <label>T√≠tulo</label>
            <input [(ngModel)]="titulo" name="titulo" required placeholder="Ex: Interestelar"/>
          </div>
          
          <div class="row-group">
            <div class="input-group">
              <label>G√™nero</label>
              <input [(ngModel)]="genero" name="genero" required placeholder="Ex: Sci-Fi"/>
            </div>
            <div class="input-group">
              <label>Ano</label>
              <input type="number" [(ngModel)]="ano_lancamento" name="ano_lancamento" required placeholder="2014"/>
            </div>
          </div>

          <div class="row-group">
            <div class="input-group">
              <label>Dura√ß√£o (min)</label>
              <input type="number" [(ngModel)]="duracao_minutos" name="duracao_minutos"/>
            </div>
            <div class="input-group">
              <label>Classifica√ß√£o</label>
              <input [(ngModel)]="classificacao_indicativa" name="classificacao_indicativa"/>
            </div>
          </div>

          <div class="input-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="assistido" name="assistido"/>
              <span class="checkmark"></span>
              J√° assistido?
            </label>
          </div>

          <button type="submit" [disabled]="salvando" class="btn-primary">
            {{ salvando ? 'Salvando...' : 'Salvar Filme' }}
          </button>
          
          @if (erro) { 
            <div class="error-msg">{{erro}}</div> 
          }
        </form>
      </section>

      <section class="glass-card list-section">
        <div class="list-header">
          <h2>Cat√°logo</h2>
          <button (click)="carregar()" [disabled]="carregando" class="btn-icon refresh-btn" title="Recarregar">
            ‚Üª
          </button>
        </div>

        @if (carregando) {
          <div class="loading-state">
            <div class="spinner"></div>
            <p>Carregando filmes...</p>
          </div>
        }@else {
          @if (filmes.length === 0) {
            <div class="empty-state">
              <p>Nenhum filme cadastrado.</p>
            </div>
          }@else {
            <ul class="movie-list">
              @for (f of filmes; track f._id) {
                <li class="movie-item">
                  <div class="movie-info">
                    <strong>{{ f.titulo }}</strong>
                    <span class="movie-details">{{f.genero}} ‚Ä¢ {{f.ano_lancamento}}</span>
                  </div>
                  <button (click)="excluir(f._id)" class="btn-delete" title="Excluir">
                    üóëÔ∏è
                  </button>
                </li>
              }
            </ul>
          }
        }
      </section>
    </div>
  </div>
</div>